## Конфигурация сетевой инфраструктуры

1. Настройте IP-адресацию на всех хостах в соответствии с диаграммой.
1. Настройте сервер протокола динамической конфигурации хостов для L-CLI.
   1. В качестве DHCP-сервера используйте L-FW.
      1. Используйте пул адресов 172.16.100.60 — 172.16.100.75.
      1. Используйте адрес L-SRV в качестве адреса DNS-сервера.
   1. В качестве шлюза по умолчанию используйте соответствующий адрес L-FW.
   1. Используйте DNS-суффикс **`skills39.wsr`**
   1. DNS-записи типа A и PTR должны обновляться при получении адреса от DHCP-сервера.
1. На L-SRV настройте службу разрешения доменных имен.
   1. Сервер должен обслуживать зону **`skills39.wsr`**
   1. Сопоставление имен необходимо организовать в соответствии с Таблицей 1.
   1. Запросы, которые выходят за рамки зоны **`skills39.wsr`** должны пересылаться DNS-серверу ISP. Для проверки используйте доменное имя **`worldskills.ru`**
   1. Реализуйте поддержку разрешения обратной зоны в соответствии с Таблицей 1.
   1. Файлы зон необходимо располагать в **`/opt/dns/`**
1. На DNS сервере ISP приобретена услуга Secondary DNS для зоны **`skills39.wsr`**
   1. Настройте возможность трансфера зоны **`skills39.wsr`** в сторону ISP.
   1. Используйте адрес ISP в качестве адреса DNS сервера для R-FW и R-CLI.
   1. Трансфер зоны на другие хосты, кроме ISP, должен быть запрещен.
1. На L-FW и R-FW настройте интернет-шлюз для организации коллективного доступа в интернет.
   1. Настройте трансляцию сетевых адресов из внутренней сети в адрес внешнего интерфейса соответствующего межсетевого экрана.

![диаграмма хостов](https://i.imgur.com/hi5ATKK.png)
<p align="center"><b><i>Диаграмма виртуальной сети</i></b></p>

| Хост  | DNS-имя |
| ------------- | ------------- |
| L-CLI  | A,PTR:1-cli.skill39.wsr  |
| L-SRC  | A,PTR:1-cli.skill39.wsr <br> CNAME:dns.skill39.wsr  |
| L-FW | A:1-fw.skill39.wsr <br> CNAME:vpn.skill39.wsr <br> CNAME:ftp.skill39.wsr |
| R-FW | A:r-fw.skill39.wsr <br> CNAME:www.skill39.wsr |
| R-CLI | A:r-cli.skill39.wsr |


<p align="left"><b>Таблица 1</b> — DNS-имена</p>

***
##  1. Установка ip-адресов
```bash
apt install mc #Для удобного поиска файлов
```
Открыть файл `/etc/network/interfaces`
И прописать интерфейсам их адреса
```bash
allow-hotplug ens34
iface ens34 intet static
address 172.16.20.1
netmask 255.255.255.192


allow-hitplug ens32
iface ens32 intet static
address 172.16.100.1
netmask 255.255.255.0
gateway 172.16.100.1
```

## 2. Настройка DHCP
### 1. Установка DHCP сервера на L-FW
```bash
sudo apt install isc-dhcp-server #Собсвенно сам сервер
```
Открываем конфиги DHCP сервера `vim /etc/dhcp/dhcpd.conf`
<br>Закоментируем строчки `option domain-name`
<br> И напишем следующее

```bash
subnet 172.16.100.0 netmask 255.255.255.0 {
   range 172.16.100.60 172.16.100.75;
   option routers 172.16.100.1;
}
```
Так же в файле `/etc/default/isc-dhcp-server`
<br>Записать в `INTERFACEv4` интерфейс `ens32` и закоментировать `INTERFACEv6`
<br>После этого перезапустить DHCP сервер `systemctl restart isc-dhcp-server.service`


